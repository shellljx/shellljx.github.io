<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Base64编码 · Shell's Blog</title><meta name="description" content="Base64编码 - shell"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Shell's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="https://github.com/shellljx" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://weibo.com/licrafter" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Base64编码</h1><div class="post-info">Apr 19, 2017</div><div class="post-content"><h4 id="编码字符串Man"><a href="#编码字符串Man" class="headerlink" title="编码字符串Man"></a>编码字符串<code>Man</code></h4><p>在 <code>ASCII</code> 编码系统中字符 <code>M</code>，<code>a</code>，<code>n</code> 被分别存储为 <code>77</code>，<code>79</code> 和 <code>110</code>，8-bit 二进制的值分别为 <code>01001101</code>，<code>01100001</code>，<code>01101110</code> . 这三个二进制值拼接成一个 24-bit 的字符串就是 <code>010011010110000101101110</code> . 然后把他转码成相应的 <code>Base64</code> 字符值如下表:<br><a id="more"></a><br><img src="http://7vzpfd.com1.z0.glb.clouddn.com/CB7FE885-42E2-484F-B0CE-D6A09AF20479.png" alt="]"></p>
<p>如上表把 3 个字节转码成为 4 个字节，当要转码的字节数不能被 3 整除时就会像下面这样 :<br>用 0 填充额外的字节，然后再转码到 <code>Base64</code> .<br>如果被转码的只有一个字节(比如 <code>M</code>)，那么所有的 8-bit 数据都会被转码成 Base64 的前 12-bit (后面全 0 字节用特殊符号 = 代替) .<br><img src="http://7vzpfd.com1.z0.glb.clouddn.com/71A4ACA4-9F7E-49A6-8E6A-B172785162F3.png" alt=""></p>
<h4 id="为什么要填充-2-字节的0呢？"><a href="#为什么要填充-2-字节的0呢？" class="headerlink" title="为什么要填充 2 字节的0呢？"></a>为什么要填充 2 字节的0呢？</h4><p>因为进行 <code>Base64</code> 转码之前和之后的数据格式变化为 3 <em> 8-bit -&gt; 4 </em> 6-bit . 所以解码过程为 4 个字节的 <code>Base64</code> 字符为一组可以解码成 3 个字节的 <code>ASCII</code> 字符 .<br><img src="http://7vzpfd.com1.z0.glb.clouddn.com/96C045F7-EFA9-420D-B56F-B64638A0CAF9.png" alt=""></p>
<p>所以如果不填充到足够的字节的话，当两个 <code>Base64</code> 的字符串拼接后在解码过程中就会出现错误 . 所以在转码填充 0 值的时候，要填充后的总位数为 6 和 8 的公倍数 . </p>
<p><a href="https://en.wikipedia.org/wiki/Base64#Padding" target="_blank" rel="external">图例来源于 Wikipedia</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/10/15/AndroidStickyLayout与触摸事件/" class="prev">上一篇</a><a href="/2017/04/19/删除了一些旧的博客/" class="next">下一篇</a></div><div data-thread-key="2017/04/19/Base64编码/" data-title="Base64编码" data-url="http://yoursite.com/2017/04/19/Base64编码/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"[object Object]"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2015 - 2017 <a href="http://yoursite.com">shell</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>