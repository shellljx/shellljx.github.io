<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="fonts.useso.com/css?family=Lato:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="量变产生质变">
<meta property="og:type" content="website">
<meta property="og:title" content="Shell's Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Shell's Blog">
<meta property="og:description" content="量变产生质变">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shell's Blog">
<meta name="twitter:description" content="量变产生质变">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/2/"/>


  <title> Shell's Blog </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Shell's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/11/blog32/" itemprop="url">
                  给RecyclerView添加header和footer
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-11T22:06:10+08:00" content="2015-11-11">
              2015-11-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>这个Adapter可以给RecyclerView添加header和footer,<a href="https://gist.github.com/darnmason/7bbf8beae24fe7296c8a" target="_blank" rel="external">链接</a></p>
</blockquote>
<p>使用方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">listview.setLayoutManager(<span class="keyword">new</span> LinearLayoutManager(<span class="keyword">this</span>));</div><div class="line">mAdapter = <span class="keyword">new</span> TestAdapter(<span class="keyword">this</span>);</div><div class="line">headerAdapter = <span class="keyword">new</span> HeaderViewRecyclerAdapter(mAdapter);</div><div class="line">View header = LayoutInflater.from(<span class="keyword">this</span>).inflate(R.layout.item_header,listview,<span class="keyword">false</span>);</div><div class="line">headerAdapter.addHeaderView(header);</div><div class="line">listview.setAdapter(headerAdapter);</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeaderViewRecyclerAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">RecyclerView</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> HEADERS_START = Integer.MIN_VALUE;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FOOTERS_START = Integer.MIN_VALUE + <span class="number">10</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ITEMS_START = Integer.MIN_VALUE + <span class="number">20</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ADAPTER_MAX_TYPES = <span class="number">100</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> RecyclerView.Adapter mWrappedAdapter;</div><div class="line">    <span class="keyword">private</span> List&lt;View&gt; mHeaderViews, mFooterViews;</div><div class="line">    <span class="keyword">private</span> Map&lt;Class, Integer&gt; mItemTypesOffset;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Construct a new header view recycler adapter</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> adapter The underlying adapter to wrap</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HeaderViewRecyclerAdapter</span><span class="params">(RecyclerView.Adapter adapter)</span> </span>&#123;</div><div class="line">        mHeaderViews = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        mFooterViews = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        mItemTypesOffset = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">        setWrappedAdapter(adapter);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Replaces the          adapter, notifying RecyclerView of changes</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> adapter The new adapter to wrap</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAdapter</span><span class="params">(RecyclerView.Adapter adapter)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mWrappedAdapter != <span class="keyword">null</span> &amp;&amp; mWrappedAdapter.getItemCount() &gt; <span class="number">0</span>) &#123;</div><div class="line">            notifyItemRangeRemoved(getHeaderCount(), mWrappedAdapter.getItemCount());</div><div class="line">        &#125;</div><div class="line">        setWrappedAdapter(adapter);</div><div class="line">        notifyItemRangeInserted(getHeaderCount(), mWrappedAdapter.getItemCount());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> RecyclerView.<span class="function">Adapter <span class="title">getWrappedAdapter</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mWrappedAdapter;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> hCount = getHeaderCount();</div><div class="line">        <span class="keyword">if</span> (position &lt; hCount) <span class="keyword">return</span> HEADERS_START + position;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">int</span> itemCount = mWrappedAdapter.getItemCount();</div><div class="line">            <span class="keyword">if</span> (position &lt; hCount + itemCount) &#123;</div><div class="line">                <span class="keyword">return</span> getAdapterTypeOffset() + mWrappedAdapter.getItemViewType(position - hCount);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">return</span> FOOTERS_START + position - hCount - itemCount;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup viewGroup, <span class="keyword">int</span> viewType)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (viewType &lt; HEADERS_START + getHeaderCount())</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> StaticViewHolder(mHeaderViews.get(viewType - HEADERS_START));</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (viewType &lt; FOOTERS_START + getFooterCount())</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> StaticViewHolder(mFooterViews.get(viewType - FOOTERS_START));</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> mWrappedAdapter.onCreateViewHolder(viewGroup, viewType - getAdapterTypeOffset());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(RecyclerView.ViewHolder viewHolder, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> hCount = getHeaderCount();</div><div class="line">        <span class="keyword">if</span> (position &gt;= hCount &amp;&amp; position &lt; hCount + mWrappedAdapter.getItemCount())</div><div class="line">            mWrappedAdapter.onBindViewHolder(viewHolder, position - hCount);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Add a static view to appear at the start of the RecyclerView. Headers are displayed in the</div><div class="line">     * order they were added.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> view The header view to add</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addHeaderView</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        mHeaderViews.add(view);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeHeaderView</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        mHeaderViews.remove(view);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Add a static view to appear at the end of the RecyclerView. Footers are displayed in the</div><div class="line">     * order they were added.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> view The footer view to add</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFooterView</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        mFooterViews.add(view);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeFooterView</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        mFooterViews.remove(view);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> getHeaderCount() + getFooterCount() + getWrappedItemCount();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@return</span> The item count in the underlying adapter</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getWrappedItemCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mWrappedAdapter.getItemCount();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@return</span> The number of header views added</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getHeaderCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mHeaderViews.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@return</span> The number of footer views added</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFooterCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mFooterViews.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setWrappedAdapter</span><span class="params">(RecyclerView.Adapter adapter)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mWrappedAdapter != <span class="keyword">null</span>) mWrappedAdapter.unregisterAdapterDataObserver(mDataObserver);</div><div class="line">        mWrappedAdapter = adapter;</div><div class="line">        Class adapterClass = mWrappedAdapter.getClass();</div><div class="line">        <span class="keyword">if</span> (!mItemTypesOffset.containsKey(adapterClass)) putAdapterTypeOffset(adapterClass);</div><div class="line">        mWrappedAdapter.registerAdapterDataObserver(mDataObserver);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">putAdapterTypeOffset</span><span class="params">(Class adapterClass)</span> </span>&#123;</div><div class="line">        mItemTypesOffset.put(adapterClass, ITEMS_START + mItemTypesOffset.size() * ADAPTER_MAX_TYPES);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getAdapterTypeOffset</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mItemTypesOffset.get(mWrappedAdapter.getClass());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> RecyclerView.AdapterDataObserver mDataObserver = <span class="keyword">new</span> RecyclerView.AdapterDataObserver() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onChanged</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>.onChanged();</div><div class="line">            notifyDataSetChanged();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemRangeChanged</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>.onItemRangeChanged(positionStart, itemCount);</div><div class="line">            notifyItemRangeChanged(positionStart + getHeaderCount(), itemCount);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemRangeInserted</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>.onItemRangeInserted(positionStart, itemCount);</div><div class="line">            notifyItemRangeInserted(positionStart + getHeaderCount(), itemCount);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemRangeRemoved</span><span class="params">(<span class="keyword">int</span> positionStart, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>.onItemRangeRemoved(positionStart, itemCount);</div><div class="line">            notifyItemRangeRemoved(positionStart + getHeaderCount(), itemCount);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemRangeMoved</span><span class="params">(<span class="keyword">int</span> fromPosition, <span class="keyword">int</span> toPosition, <span class="keyword">int</span> itemCount)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>.onItemRangeMoved(fromPosition, toPosition, itemCount);</div><div class="line">            <span class="keyword">int</span> hCount = getHeaderCount();</div><div class="line">            <span class="comment">// <span class="doctag">TODO:</span> No notifyItemRangeMoved method?</span></div><div class="line">            notifyItemRangeChanged(fromPosition + hCount, toPosition + hCount + itemCount);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">StaticViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/11/blog31/" itemprop="url">
                  哈哈哈哈哈
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-11T17:25:48+08:00" content="2015-11-11">
              2015-11-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>今天双11,看着别人剁手的感觉就是爽….<br><img src="http://7vzpfd.com1.z0.glb.clouddn.com/4d8e849aa8a98bf69b44f8ac21a58707.gif" alt=""><br>写代码写累了…去吃点狗粮.</p>
</blockquote>
<p>今天把数据库缓存功能终于写完了,调试了也没有什么bug,接下来开始写展示页面.</p>
<p>胜利就在眼前!</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/11/blog30/" itemprop="url">
                  Android 框架 OrmLite
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-11T08:42:12+08:00" content="2015-11-11">
              2015-11-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>关于OrmLite的教程网上有很多,但是有些细节上的坑需要注意一下..<br>昨天要用到<code>OrmLite</code>的一对多的关联,结果踩了一个大坑</p>
</blockquote>
<hr>
<p>有两个model,<code>TabelContent</code>和<code>Topic</code>,之间关系是一对多.模型定义如下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@DatabaseTable</span>(tableName = <span class="string">"tb_topic"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Topic</span> </span>&#123;</div><div class="line">    <span class="meta">@DatabaseField</span>(generatedId = <span class="keyword">true</span>)</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;                         			<span class="comment">//数据库记录id,自增</span></div><div class="line">    <span class="meta">@DatabaseField</span>(columnName = <span class="string">"nodeName"</span>)</div><div class="line">    <span class="keyword">private</span> String nodeName;               <span class="comment">//来自节点的名字</span></div><div class="line">    <span class="meta">@DatabaseField</span>(columnName = <span class="string">"createTime"</span>)</div><div class="line">    <span class="keyword">private</span> String createTime;               <span class="comment">//发布时间</span></div><div class="line">    <span class="meta">@DatabaseField</span>(columnName = <span class="string">"replies"</span>)</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> replies;                            <span class="comment">//回复次数</span></div><div class="line">    <span class="meta">@DatabaseField</span>(foreign = <span class="keyword">true</span>,foreignAutoRefresh = <span class="keyword">true</span>)</div><div class="line">    <span class="keyword">private</span> TableContent content;</div><div class="line">&#125;</div><div class="line">    <span class="comment">//get set方法省略</span></div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@DatabaseTable</span>(tableName = <span class="string">"tb_table_content"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TableContent</span> </span>&#123;</div><div class="line">    <span class="meta">@DatabaseField</span>(generatedId = <span class="keyword">true</span>)</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;                         		   <span class="comment">//数据库记录id</span></div><div class="line">    <span class="meta">@DatabaseField</span>(columnName = <span class="string">"name"</span>)</div><div class="line">    <span class="keyword">private</span> String name;                     	<span class="comment">//tab名字</span></div><div class="line">    <span class="meta">@DatabaseField</span>(columnName = <span class="string">"page"</span>)</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> page;                           	<span class="comment">//当前页码</span></div><div class="line">    <span class="meta">@DatabaseField</span>(columnName = <span class="string">"totalPages"</span>)</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> totalPages;                 	<span class="comment">//总页码</span></div><div class="line">    <span class="meta">@ForeignCollectionField</span>(eager = <span class="keyword">true</span>)</div><div class="line">    <span class="keyword">private</span> Collection&lt;Topic&gt; topics;  <span class="comment">//话题列表</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong><em>在创建数据的时候要注意的地方如下:</em></strong></p>
<p>1.在创建<code>TableContent</code>的数据记录的时候,要遍历一个个的创建<code>Topic</code>数据<br>2.<code>TableContent</code>要比<code>Topic</code>先<code>create</code>才可以,否则通过关联去不到数据..<br>3.<code>Topic</code>添加记录之前记得要set外键,否则也查询不到数据<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mDataBaseHelper.getTableContentDao().create(mData);</div><div class="line"><span class="keyword">for</span> (Topic topic:mData.getTopics())&#123;</div><div class="line">	<span class="comment">//记得set外键</span></div><div class="line">	topic.setContent(mData);				</div><div class="line">    mDataBaseHelper.getTopicDao().create(topic);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/09/blog29/" itemprop="url">
                  ＃今天遇到bug了吗？＃
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-09T17:12:12+08:00" content="2015-11-09">
              2015-11-09
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天虽然没有遇到什么bug，但是调一个界面布局，调了半天，想要调出一个完美的界面，看着舒服的界面，字体大小，控件之间的间距，字体颜色，背景色，调来调去，看了不少其他应用的布局，最后终于调出了比较满意的效果．审美和界面设计能力令人捉急啊．．．．加油，我的openv2ex开源客户端．</p>
<p><img src="http://7vzpfd.com1.z0.glb.clouddn.com/Screenshot_2015-11-09-17-32-09.png" width="240"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/27/blog25/" itemprop="url">
                  本站域名已更换为licrafter.com
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-27T10:55:26+08:00" content="2015-10-27">
              2015-10-27
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>以前的域名linghun.me已经到期了，现在本站域名改为licrafter.com  新的域名新的开始。。。。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/25/blog24/" itemprop="url">
                  Android自定义ExpandableRecyclerView的实现
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-25T22:44:08+08:00" content="2015-10-25">
              2015-10-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><video id="video" controls preload="none" width="220" poster="http://7vzpfd.com1.z0.glb.clouddn.com/device-2015-10-25-225241.png"><br>      <source id="mp4" src="http://7vzpfd.com1.z0.glb.clouddn.com/device-2015-10-25-234244.mp4" type="video/mp4"><br>      <source id="webm" src="http://media.w3.org/2010/05/sintel/trailer.webm" type="video/webm"><br>      <p>Your user agent does not support the HTML5 Video element.</p><br>    </video><br><strong><em>双击视频放大观看</em></strong></p>
<blockquote>
<p>最近在做项目的时候，用到了可扩展的RecyclerView.在github上找到了一个ListView的第三方库，不支持RecyclerView，也比较臃肿，下面是自己实现的一个可扩展RecyclerView．源代码地址<a href="https://github.com/shellljx/CityCircle/blob/master/app/src/main/java/shellljx/gmail/com/app/adapter/TopicAdapter.java" target="_blank" rel="external">点我</a></p>
</blockquote>
<p>#####原理<br>首先要把整个扩展<code>RecyclerView</code>的功能逻辑分成两部分：</p>
<p>1.在<code>onBindViewHolder</code>方法中通过<code>eHolder.buttonExp.setTag(position);</code>给每个<code>holder</code>设置TAG,这个TAG是这一条数据的<code>position</code>是唯一的.然后在绑定数据的时候,根据得到的每一个holder的TAG是否等于已经展开状态的那个<code>position</code>来设置该<code>holder</code>是否应该处于展开状态.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (((Integer) eHolder.buttonExp.getTag()).intValue() == mLastPosition) &#123;</div><div class="line">    eHolder.openExpand();</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    eHolder.closeExpand();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.因为整个屏幕中可见的item中,只能有一个处于展开状态,所以当点击了触发按钮,该item执行展开动画,并保存该item所对应的position和ViewHolder.然后让上一个已经展开的item关闭.但是上一个展开的ViewHolder有可能已经被复用了(即回复到没有展开的状态)所以还要复写<code>onViewRecycled</code>方法,判断ViewHolder是否已经被复用.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">eHolder.buttonExp.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(<span class="keyword">final</span> View view)</span> </span>&#123;</div><div class="line">        eHolder.runAnimator();</div><div class="line">        LinearLayout btn = (LinearLayout) view;</div><div class="line">        <span class="keyword">int</span> clickPos = ((Integer) btn.getTag()).intValue();</div><div class="line">        <span class="keyword">if</span> (clickPos != mLastPosition) &#123;</div><div class="line">            eHolder.runAnimator(<span class="keyword">true</span>);</div><div class="line">            mLastPosition = clickPos;</div><div class="line">            <span class="keyword">if</span> (mLastHolder != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (!isRecyced)</div><div class="line">                    mLastHolder.runAnimator();</div><div class="line">            &#125;</div><div class="line">            mLastHolder = eHolder;</div><div class="line">            isRecyced = <span class="keyword">false</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            mLastHolder = <span class="keyword">null</span>;</div><div class="line">            mLastPosition = -<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong><em>下面是完整代码</em></strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TopicAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">RecyclerView</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Context mContext;</div><div class="line">    <span class="keyword">private</span> TopicHeader header;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mHeaderLayoutId;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mLayoutId;</div><div class="line">    <span class="keyword">private</span> LayoutInflater mInflate;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mLastPosition = -<span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> ExpandViewHolder mLastHolder = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isRecyced;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mAnimatedPosition = -<span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> List&lt;Topic&gt; mDatas;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TopicAdapter</span><span class="params">(Context context, RecyclerView listview, List&lt;Topic&gt; data, TopicHeader header, <span class="keyword">int</span> layoutId, <span class="keyword">int</span> headerLayoutId)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.mContext = context;</div><div class="line">        <span class="keyword">this</span>.header = header;</div><div class="line">        <span class="keyword">this</span>.mDatas = data;</div><div class="line">        <span class="keyword">this</span>.mHeaderLayoutId = headerLayoutId;</div><div class="line">        <span class="keyword">this</span>.mLayoutId = layoutId;</div><div class="line">        <span class="keyword">this</span>.mInflate = LayoutInflater.from(mContext);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mDatas.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (viewType) &#123;</div><div class="line">            <span class="keyword">case</span> Constants.EXTRA.LIST_LOADING:</div><div class="line">                View loading = mInflate.inflate(R.layout.loading_first_time, parent, <span class="keyword">false</span>);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> LoadingViewHolder(loading);</div><div class="line">            <span class="keyword">case</span> Constants.EXTRA.LIST_ITEM:</div><div class="line">                View item = mInflate.inflate(mLayoutId, parent, <span class="keyword">false</span>);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> ExpandViewHolder(item);</div><div class="line">            <span class="keyword">case</span> Constants.EXTRA.LIST_HEADER:</div><div class="line">                View header = mInflate.inflate(mHeaderLayoutId, parent, <span class="keyword">false</span>);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> HeaderViewHolder(header);</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(<span class="keyword">final</span> RecyclerView.ViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (holder <span class="keyword">instanceof</span> ExpandViewHolder) &#123;</div><div class="line">            <span class="keyword">final</span> ExpandViewHolder eHolder = (ExpandViewHolder) holder;</div><div class="line">            <span class="comment">//当列表向上滑动的时候position是出现在下边界的item，</span></div><div class="line">            <span class="comment">// 当列表向下滑动的时候，position是出现在上边界的item</span></div><div class="line">            <span class="keyword">if</span> (mAnimatedPosition &lt; position) &#123;</div><div class="line">                eHolder.animatorSet.start();</div><div class="line">                mAnimatedPosition = position;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                mAnimatedPosition = position;</div><div class="line">            &#125;</div><div class="line">            eHolder.buttonExp.setTag(position);</div><div class="line">            eHolder.buttonExp.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(<span class="keyword">final</span> View view)</span> </span>&#123;</div><div class="line">                    eHolder.runAnimator();</div><div class="line">                    LinearLayout btn = (LinearLayout) view;</div><div class="line">                    <span class="keyword">int</span> clickPos = ((Integer) btn.getTag()).intValue();</div><div class="line">                    <span class="keyword">if</span> (clickPos != mLastPosition) &#123;</div><div class="line">                        eHolder.runAnimator(<span class="keyword">true</span>);</div><div class="line">                        mLastPosition = clickPos;</div><div class="line">                        <span class="keyword">if</span> (mLastHolder != <span class="keyword">null</span>) &#123;</div><div class="line">                            <span class="keyword">if</span> (!isRecyced)</div><div class="line">                                mLastHolder.runAnimator();</div><div class="line">                        &#125;</div><div class="line">                        mLastHolder = eHolder;</div><div class="line">                        isRecyced = <span class="keyword">false</span>;</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        mLastHolder = <span class="keyword">null</span>;</div><div class="line">                        mLastPosition = -<span class="number">1</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">            <span class="keyword">if</span> (((Integer) eHolder.buttonExp.getTag()).intValue() == mLastPosition) &#123;</div><div class="line">                eHolder.openExpand();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                eHolder.closeExpand();</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (holder <span class="keyword">instanceof</span> HeaderViewHolder) &#123;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == mDatas.get(position)) &#123;</div><div class="line">            <span class="keyword">if</span> (position == <span class="number">0</span>)</div><div class="line">                <span class="keyword">return</span> Constants.EXTRA.LIST_HEADER; <span class="comment">//当第一个item为空，返回header</span></div><div class="line">            <span class="keyword">return</span> Constants.EXTRA.LIST_LOADING;    <span class="comment">//当最后一个item为空，返回加载中</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> Constants.EXTRA.LIST_ITEM;           <span class="comment">//返回正常item</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewRecycled</span><span class="params">(RecyclerView.ViewHolder holder)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onViewRecycled(holder);</div><div class="line">        <span class="keyword">if</span> (mLastHolder != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (holder == mLastHolder) &#123;</div><div class="line">                isRecyced = !isRecyced;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ExpandViewHolder</span> <span class="keyword">extends</span> <span class="title">AnimationViewHolder</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> TextView buttonA, buttonB;</div><div class="line">        <span class="keyword">public</span> LinearLayout buttonExp;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">final</span> LinearLayout ll;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> status = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ExpandViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">            buttonA = (TextView) itemView.findViewById(R.id.bt_a);</div><div class="line">            buttonB = (TextView) itemView.findViewById(R.id.bt_b);</div><div class="line">            buttonExp = (LinearLayout) itemView.findViewById(R.id.ll_expand_btn);</div><div class="line">            ll = (LinearLayout) itemView.findViewById(R.id.expandable);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runAnimator</span><span class="params">(<span class="keyword">boolean</span> isExpand)</span> </span>&#123;</div><div class="line">            ValueAnimator valueAnimator;</div><div class="line">            <span class="keyword">if</span> (isExpand) &#123;</div><div class="line">                status = <span class="keyword">true</span>;</div><div class="line">                valueAnimator = ValueAnimator.ofInt(<span class="number">0</span>, <span class="number">120</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                status = <span class="keyword">false</span>;</div><div class="line">                valueAnimator = ValueAnimator.ofInt(<span class="number">120</span>, <span class="number">0</span>);</div><div class="line">            &#125;</div><div class="line">            valueAnimator.setDuration(<span class="number">150</span>);</div><div class="line">            valueAnimator.setInterpolator(<span class="keyword">new</span> LinearInterpolator());</div><div class="line">            valueAnimator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</div><div class="line">                    Integer value = (Integer) animation.getAnimatedValue();</div><div class="line">                    ll.getLayoutParams().height = value.intValue();</div><div class="line">                    ll.requestLayout();</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">            valueAnimator.start();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runAnimator</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (status) &#123;</div><div class="line">                runAnimator(<span class="keyword">false</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                runAnimator(<span class="keyword">true</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">closeExpand</span><span class="params">()</span> </span>&#123;</div><div class="line">            ll.getLayoutParams().height = <span class="number">0</span>;</div><div class="line">            ll.requestLayout();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openExpand</span><span class="params">()</span> </span>&#123;</div><div class="line">            ll.getLayoutParams().height = <span class="number">120</span>;</div><div class="line">            ll.requestLayout();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">HeaderViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">HeaderViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LoadingViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">LoadingViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/23/13/" itemprop="url">
                  需求更新太快的弊端
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-23T22:03:31+08:00" content="2015-10-23">
              2015-10-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>项目需求更新频率和尿频患者一样，导致的一个问题就是，代码一点也不优雅，而是在堆代码。。。。废代码太多,项目就像是一坨屎</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/19/blog26/" itemprop="url">
                  git rebase & git cherry-pick&branch
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-19T16:49:59+08:00" content="2015-09-19">
              2015-09-19
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://ww1.sinaimg.cn/bmiddle/63918611gw1eqxtzlte6cj206i08awen.jpg" alt="Linus Torvalds"><br>题图是git的发明人—Linux 教父 Linus Torvalds </p>
<blockquote>
<p>在软件开发过程中，版本控制和多人协作非常的重要，Ｇit在这两个方面的功能是非常的强大的．在实际工作中Git对我的帮助非常的大，我经常用到这几个指令<code>rebase</code>,<code>cherry-pick</code>,<code>branch</code>,<code>checkout</code>,<code>stash</code>，<code>reset</code></p>
</blockquote>
<hr>
<p>####branch<br>首先锁一下<code>branch</code>分支，在实际开发过程中，开发一个新的功能就新建一个分支，如果正在开发一个新功能，突然来了一个其他功能的bug,如果修改bug的代码和新功能的代码commit混在一起，不同功能的代码commit混在一起，如果同时开发的功能点非常多的话，就会非常混乱，通过<code>git checkout -b newbranch</code>创建不同的分支，来管理不同的开发需求，会让代码管理清楚很多．</p>
<p>####cherry-pick<br>当多个分支合并代码时，使用<code>merge</code>,会有很多的问题，解决一些莫名的冲突会花费很长的时间．<code>git cherry-pick</code>可以把一个分支上特定的commit合并到另一个分支上去，这样出现的<code>conflict</code>就会少得多，甚至没有冲突．</p>
<p>####rebase<br><code>rebase</code>指令功能非常的强大，它可用修改commit历史，可以合并多个commit为一个commit，可以调换commit之间的顺序….非常好用．</p>
<p>####stash<br>当你在一个分支上正写着代码，突然需要你切换到另一个分支上去改bug,你又不想现在提交，可以使用<code>git stash</code>指令，最后记得要把代码<code>pop</code>出来．</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/08/digitaloceanan-zhuang-laravel/" itemprop="url">
                  digitalocean安装laravel
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-08T17:30:14+08:00" content="2015-09-08">
              2015-09-08
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前段时间在digitalocean上安装laravel遇到了<code>out of memory</code>的坑，下面是一个完美的安装方法</p>
<blockquote>
<p>How To Install Laravel with Nginx on an Ubuntu 12.04 LTS VPS</p>
</blockquote>
<hr>
<p>Laravel is a framework for websites in the PHP programming language. It allows developers to rapidly develop a website by abstracting common tasks used in most web projects, such as authentication, sessions, and caching. Laravel 4, the newest version of Laravel is based on an older framework called Symfony, but with a more expressive syntax. It is installed using Composer, a Dependency Manager, allowing developers to integrate even more open source PHP projects in a web project. If you want to want to read a quick introduction to Laravel, read the introduction. If you want to learn more about Composer, visit the website.</p>
<p>Preparation</p>
<p>Let’s start off by updating the packages installed on your VPS. This makes sure no issues will arise on incompatible versions of the software. Also, make sure you run everything in this tutorial as root, and if you don’t, make sure you add sudo before every command!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">apt-get update &amp;&amp; apt-get upgrade</div><div class="line">Hit Enter when you&apos;re asked to confirm.</div></pre></td></tr></table></figure>
<p>Installation<br>Now we need to install the actual packages required to install Laravel. This will basically be Nginx and PHP. Because Composer is run from the command line, we do need php5-cli, and because we want to manage the connection between Nginx and PHP using the FastCGI Process Manager, we will need php5-fpm as well. Besides, Laravel requires php5-mcrypt and Composer requires git.</p>
<p><code>apt-get install nginx php5-fpm php5-cli php5-mcrypt git</code><br>This should take a while to install, but you are now ready to configure Nginx and PHP.</p>
<p>Configuring Nginx</p>
<p>We will configure Nginx like Laravel is the only website you will run on it, basically accepting every HTTP request, no matter what the Host header contains. If you want more than one website on your VPS, please refer to this tutorial.</p>
<p>Make a dedicated folder for your Laravel website:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir /var/www</div><div class="line">mkdir /var/www/laravel</div></pre></td></tr></table></figure></p>
<p>Open up the default virtual host file.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano /etc/nginx/sites-available/default</div></pre></td></tr></table></figure></p>
<p>The configuration should look like below:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen   80 default_server;</div><div class="line"></div><div class="line">    root /var/www/laravel/public/;</div><div class="line">    index index.php index.html index.htm;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">         try_files $uri $uri/ /index.php$is_args$args;</div><div class="line">    &#125;</div><div class="line"># pass the PHP scripts to FastCGI server listening on  /var/run/php5-fpm.sock</div><div class="line">    location ~ \.php$ &#123;</div><div class="line">            try_files $uri /index.php =404;</div><div class="line">            fastcgi_pass unix:/var/run/php5-fpm.sock;</div><div class="line">            fastcgi_index index.php;</div><div class="line">            fastcgi_param SCRIPT_FILENAME 							$document_root$fastcgi_script_name;</div><div class="line">            include fastcgi_params;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Now save and exit!</p>
<p>Configuring PHP</p>
<p>We need to make a small change in the PHP configuration. Open the php.ini file:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano /etc/php5/fpm/php.ini</div></pre></td></tr></table></figure></p>
<p>Find the line, <code>cgi.fix_pathinfo=1</code>, and change the 1 to 0.<br><code>cgi.fix_pathinfo=0</code><br>If this number is kept as 1, the PHP interpreter will do its best to process the file that is as near to the requested file as possible. This is a possible security risk. If this number is set to 0, conversely, the interpreter will only process the exact file path — a much safer alternative. Now save it and exit nano.</p>
<p>We need to make another small change in the php5-fpm configuration. Open up www.conf:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano /etc/php5/fpm/pool.d/www.conf</div></pre></td></tr></table></figure></p>
<p>Find the line, <code>listen = 127.0.0.1:9000</code>, and change the <code>127.0.0.1:9000</code> to <code>/var/run/php5-fpm.sock</code>.</p>
<p><code>listen = /var/run/php5-fpm.sock</code></p>
<p>Again: save and exit!</p>
<p>(Re)Starting PHP and Nginx</p>
<p>Now make sure that both services are restarted.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service php5-fpm restart</div><div class="line">service nginx restart</div></pre></td></tr></table></figure></p>
<p>Installing Composer</p>
<p>It is now time to install Composer, this process is quite straightforward. Let’s start off by downloading Composer:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -sS https://getcomposer.org/installer | php</div></pre></td></tr></table></figure>
<p>Now install it globally:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv composer.phar /usr/local/bin/composer</div></pre></td></tr></table></figure></p>
<p>Installing Laravel</p>
<p>Heads Up: If you’re installing Laravel on DigitalOcean’s 512MB VPS, make sure you add a swapfile to Ubuntu to prevent it from running out of memory. You can quickly do this by issuing the following commands. This will only work during 1 session, so if you reboot during this tutorial, add the swapfile again.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dd if=/dev/zero of=/swapfile bs=1024 count=512k</div><div class="line">mkswap /swapfile</div><div class="line">swapon /swapfile</div></pre></td></tr></table></figure></p>
<p>Finally, let’s install Laravel.<br><strong><em>laravel5的安装方法参考<a href="http://www.golaravel.com/laravel/" target="_blank" rel="external">laravel中文社区</a></em></strong></p>
<p>Fixing permissions</p>
<p>This is really quite a easy fix:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chgrp -R www-data /var/www/laravel</div><div class="line">chmod -R 775 /var/www/laravel/app/storage</div></pre></td></tr></table></figure></p>
<p>Wrap Up<br>So that it, you can now enjoy Laravel running on a fast Nginx backend! If you want to use MySQL on your Laravel installation, it is extremely easy: just issue apt-get install mysql-server and MySQL will be installed right away. For more information on using Laravel visit the website. Happy developing!<br><a href="https://www.digitalocean.com/community/tutorials/how-to-install-laravel-with-nginx-on-an-ubuntu-12-04-lts-vps" target="_blank" rel="external">原文</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/07/14/androiddan-chu-quan-ping-dialog/" itemprop="url">
                  Android弹出全屏Dialog
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-14T09:11:12+08:00" content="2015-07-14">
              2015-07-14
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">public Dialog getDialog()&#123;</div><div class="line">AlertDialog dialog = builder.create();</div><div class="line">dialog.show();</div><div class="line">dialog.setContentView(layout);</div><div class="line">Window window = dialog.getWindow();</div><div class="line">WindowManager.LayoutParams lp = window.getAttributes();</div><div class="line">lp.width = WindowManager.LayoutParams.MATCH_PARENT;</div><div class="line">lp.height = WindowManager.LayoutParams.MATCH_PARENT;</div><div class="line">window.setAttributes(lp);</div><div class="line">return dialog;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars0.githubusercontent.com/u/7572018?v=3&s=466"
               alt="shell" />
          <p class="site-author-name" itemprop="name">shell</p>
          <p class="site-description motion-element" itemprop="description">量变产生质变</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">30</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/shellljx" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/shellljx" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/shellljx" target="_blank" title="QQ">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  QQ
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/shellljx" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shell</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

</body>
</html>
