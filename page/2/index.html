<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="fonts.useso.com/css?family=Lato:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="量变产生质变">
<meta property="og:type" content="website">
<meta property="og:title" content="Shell's Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Shell's Blog">
<meta property="og:description" content="量变产生质变">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shell's Blog">
<meta name="twitter:description" content="量变产生质变">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/2/"/>


  <title> Shell's Blog </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Shell's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/25/blog24/" itemprop="url">
                  Android自定义ExpandableRecyclerView的实现
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-25T22:44:08+08:00" content="2015-10-25">
              2015-10-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><video id="video" controls preload="none" width="220" poster="http://7vzpfd.com1.z0.glb.clouddn.com/device-2015-10-25-225241.png"><br>      <source id="mp4" src="http://7vzpfd.com1.z0.glb.clouddn.com/device-2015-10-25-234244.mp4" type="video/mp4"><br>      <source id="webm" src="http://media.w3.org/2010/05/sintel/trailer.webm" type="video/webm"><br>      <p>Your user agent does not support the HTML5 Video element.</p><br>    </video><br><strong><em>双击视频放大观看</em></strong></p>
<blockquote>
<p>最近在做项目的时候，用到了可扩展的RecyclerView.在github上找到了一个ListView的第三方库，不支持RecyclerView，也比较臃肿，下面是自己实现的一个可扩展RecyclerView．源代码地址<a href="https://github.com/shellljx/CityCircle/blob/master/app/src/main/java/shellljx/gmail/com/app/adapter/TopicAdapter.java" target="_blank" rel="external">点我</a></p>
</blockquote>
<p>#####原理<br>首先要把整个扩展<code>RecyclerView</code>的功能逻辑分成两部分：</p>
<p>1.在<code>onBindViewHolder</code>方法中通过<code>eHolder.buttonExp.setTag(position);</code>给每个<code>holder</code>设置TAG,这个TAG是这一条数据的<code>position</code>是唯一的.然后在绑定数据的时候,根据得到的每一个holder的TAG是否等于已经展开状态的那个<code>position</code>来设置该<code>holder</code>是否应该处于展开状态.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (((Integer) eHolder.buttonExp.getTag()).intValue() == mLastPosition) &#123;</div><div class="line">    eHolder.openExpand();</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    eHolder.closeExpand();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.因为整个屏幕中可见的item中,只能有一个处于展开状态,所以当点击了触发按钮,该item执行展开动画,并保存该item所对应的position和ViewHolder.然后让上一个已经展开的item关闭.但是上一个展开的ViewHolder有可能已经被复用了(即回复到没有展开的状态)所以还要复写<code>onViewRecycled</code>方法,判断ViewHolder是否已经被复用.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">eHolder.buttonExp.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(<span class="keyword">final</span> View view)</span> </span>&#123;</div><div class="line">        eHolder.runAnimator();</div><div class="line">        LinearLayout btn = (LinearLayout) view;</div><div class="line">        <span class="keyword">int</span> clickPos = ((Integer) btn.getTag()).intValue();</div><div class="line">        <span class="keyword">if</span> (clickPos != mLastPosition) &#123;</div><div class="line">            eHolder.runAnimator(<span class="keyword">true</span>);</div><div class="line">            mLastPosition = clickPos;</div><div class="line">            <span class="keyword">if</span> (mLastHolder != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (!isRecyced)</div><div class="line">                    mLastHolder.runAnimator();</div><div class="line">            &#125;</div><div class="line">            mLastHolder = eHolder;</div><div class="line">            isRecyced = <span class="keyword">false</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            mLastHolder = <span class="keyword">null</span>;</div><div class="line">            mLastPosition = -<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong><em>下面是完整代码</em></strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TopicAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">RecyclerView</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Context mContext;</div><div class="line">    <span class="keyword">private</span> TopicHeader header;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mHeaderLayoutId;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mLayoutId;</div><div class="line">    <span class="keyword">private</span> LayoutInflater mInflate;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mLastPosition = -<span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> ExpandViewHolder mLastHolder = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isRecyced;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mAnimatedPosition = -<span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> List&lt;Topic&gt; mDatas;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TopicAdapter</span><span class="params">(Context context, RecyclerView listview, List&lt;Topic&gt; data, TopicHeader header, <span class="keyword">int</span> layoutId, <span class="keyword">int</span> headerLayoutId)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.mContext = context;</div><div class="line">        <span class="keyword">this</span>.header = header;</div><div class="line">        <span class="keyword">this</span>.mDatas = data;</div><div class="line">        <span class="keyword">this</span>.mHeaderLayoutId = headerLayoutId;</div><div class="line">        <span class="keyword">this</span>.mLayoutId = layoutId;</div><div class="line">        <span class="keyword">this</span>.mInflate = LayoutInflater.from(mContext);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mDatas.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> RecyclerView.<span class="function">ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (viewType) &#123;</div><div class="line">            <span class="keyword">case</span> Constants.EXTRA.LIST_LOADING:</div><div class="line">                View loading = mInflate.inflate(R.layout.loading_first_time, parent, <span class="keyword">false</span>);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> LoadingViewHolder(loading);</div><div class="line">            <span class="keyword">case</span> Constants.EXTRA.LIST_ITEM:</div><div class="line">                View item = mInflate.inflate(mLayoutId, parent, <span class="keyword">false</span>);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> ExpandViewHolder(item);</div><div class="line">            <span class="keyword">case</span> Constants.EXTRA.LIST_HEADER:</div><div class="line">                View header = mInflate.inflate(mHeaderLayoutId, parent, <span class="keyword">false</span>);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> HeaderViewHolder(header);</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(<span class="keyword">final</span> RecyclerView.ViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (holder <span class="keyword">instanceof</span> ExpandViewHolder) &#123;</div><div class="line">            <span class="keyword">final</span> ExpandViewHolder eHolder = (ExpandViewHolder) holder;</div><div class="line">            <span class="comment">//当列表向上滑动的时候position是出现在下边界的item，</span></div><div class="line">            <span class="comment">// 当列表向下滑动的时候，position是出现在上边界的item</span></div><div class="line">            <span class="keyword">if</span> (mAnimatedPosition &lt; position) &#123;</div><div class="line">                eHolder.animatorSet.start();</div><div class="line">                mAnimatedPosition = position;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                mAnimatedPosition = position;</div><div class="line">            &#125;</div><div class="line">            eHolder.buttonExp.setTag(position);</div><div class="line">            eHolder.buttonExp.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(<span class="keyword">final</span> View view)</span> </span>&#123;</div><div class="line">                    eHolder.runAnimator();</div><div class="line">                    LinearLayout btn = (LinearLayout) view;</div><div class="line">                    <span class="keyword">int</span> clickPos = ((Integer) btn.getTag()).intValue();</div><div class="line">                    <span class="keyword">if</span> (clickPos != mLastPosition) &#123;</div><div class="line">                        eHolder.runAnimator(<span class="keyword">true</span>);</div><div class="line">                        mLastPosition = clickPos;</div><div class="line">                        <span class="keyword">if</span> (mLastHolder != <span class="keyword">null</span>) &#123;</div><div class="line">                            <span class="keyword">if</span> (!isRecyced)</div><div class="line">                                mLastHolder.runAnimator();</div><div class="line">                        &#125;</div><div class="line">                        mLastHolder = eHolder;</div><div class="line">                        isRecyced = <span class="keyword">false</span>;</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        mLastHolder = <span class="keyword">null</span>;</div><div class="line">                        mLastPosition = -<span class="number">1</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">            <span class="keyword">if</span> (((Integer) eHolder.buttonExp.getTag()).intValue() == mLastPosition) &#123;</div><div class="line">                eHolder.openExpand();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                eHolder.closeExpand();</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (holder <span class="keyword">instanceof</span> HeaderViewHolder) &#123;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == mDatas.get(position)) &#123;</div><div class="line">            <span class="keyword">if</span> (position == <span class="number">0</span>)</div><div class="line">                <span class="keyword">return</span> Constants.EXTRA.LIST_HEADER; <span class="comment">//当第一个item为空，返回header</span></div><div class="line">            <span class="keyword">return</span> Constants.EXTRA.LIST_LOADING;    <span class="comment">//当最后一个item为空，返回加载中</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> Constants.EXTRA.LIST_ITEM;           <span class="comment">//返回正常item</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewRecycled</span><span class="params">(RecyclerView.ViewHolder holder)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onViewRecycled(holder);</div><div class="line">        <span class="keyword">if</span> (mLastHolder != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (holder == mLastHolder) &#123;</div><div class="line">                isRecyced = !isRecyced;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ExpandViewHolder</span> <span class="keyword">extends</span> <span class="title">AnimationViewHolder</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> TextView buttonA, buttonB;</div><div class="line">        <span class="keyword">public</span> LinearLayout buttonExp;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">final</span> LinearLayout ll;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> status = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ExpandViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">            buttonA = (TextView) itemView.findViewById(R.id.bt_a);</div><div class="line">            buttonB = (TextView) itemView.findViewById(R.id.bt_b);</div><div class="line">            buttonExp = (LinearLayout) itemView.findViewById(R.id.ll_expand_btn);</div><div class="line">            ll = (LinearLayout) itemView.findViewById(R.id.expandable);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runAnimator</span><span class="params">(<span class="keyword">boolean</span> isExpand)</span> </span>&#123;</div><div class="line">            ValueAnimator valueAnimator;</div><div class="line">            <span class="keyword">if</span> (isExpand) &#123;</div><div class="line">                status = <span class="keyword">true</span>;</div><div class="line">                valueAnimator = ValueAnimator.ofInt(<span class="number">0</span>, <span class="number">120</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                status = <span class="keyword">false</span>;</div><div class="line">                valueAnimator = ValueAnimator.ofInt(<span class="number">120</span>, <span class="number">0</span>);</div><div class="line">            &#125;</div><div class="line">            valueAnimator.setDuration(<span class="number">150</span>);</div><div class="line">            valueAnimator.setInterpolator(<span class="keyword">new</span> LinearInterpolator());</div><div class="line">            valueAnimator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</div><div class="line">                    Integer value = (Integer) animation.getAnimatedValue();</div><div class="line">                    ll.getLayoutParams().height = value.intValue();</div><div class="line">                    ll.requestLayout();</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">            valueAnimator.start();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runAnimator</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (status) &#123;</div><div class="line">                runAnimator(<span class="keyword">false</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                runAnimator(<span class="keyword">true</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">closeExpand</span><span class="params">()</span> </span>&#123;</div><div class="line">            ll.getLayoutParams().height = <span class="number">0</span>;</div><div class="line">            ll.requestLayout();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openExpand</span><span class="params">()</span> </span>&#123;</div><div class="line">            ll.getLayoutParams().height = <span class="number">120</span>;</div><div class="line">            ll.requestLayout();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">HeaderViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">HeaderViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LoadingViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">LoadingViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/23/13/" itemprop="url">
                  需求更新太快的弊端
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-10-23T22:03:31+08:00" content="2015-10-23">
              2015-10-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>项目需求更新频率和尿频患者一样，导致的一个问题就是，代码一点也不优雅，而是在堆代码。。。。废代码太多,项目就像是一坨屎</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/19/blog26/" itemprop="url">
                  git rebase & git cherry-pick&branch
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-19T16:49:59+08:00" content="2015-09-19">
              2015-09-19
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://ww1.sinaimg.cn/bmiddle/63918611gw1eqxtzlte6cj206i08awen.jpg" alt="Linus Torvalds"><br>题图是git的发明人—Linux 教父 Linus Torvalds </p>
<blockquote>
<p>在软件开发过程中，版本控制和多人协作非常的重要，Ｇit在这两个方面的功能是非常的强大的．在实际工作中Git对我的帮助非常的大，我经常用到这几个指令<code>rebase</code>,<code>cherry-pick</code>,<code>branch</code>,<code>checkout</code>,<code>stash</code>，<code>reset</code></p>
</blockquote>
<hr>
<p>####branch<br>首先锁一下<code>branch</code>分支，在实际开发过程中，开发一个新的功能就新建一个分支，如果正在开发一个新功能，突然来了一个其他功能的bug,如果修改bug的代码和新功能的代码commit混在一起，不同功能的代码commit混在一起，如果同时开发的功能点非常多的话，就会非常混乱，通过<code>git checkout -b newbranch</code>创建不同的分支，来管理不同的开发需求，会让代码管理清楚很多．</p>
<p>####cherry-pick<br>当多个分支合并代码时，使用<code>merge</code>,会有很多的问题，解决一些莫名的冲突会花费很长的时间．<code>git cherry-pick</code>可以把一个分支上特定的commit合并到另一个分支上去，这样出现的<code>conflict</code>就会少得多，甚至没有冲突．</p>
<p>####rebase<br><code>rebase</code>指令功能非常的强大，它可用修改commit历史，可以合并多个commit为一个commit，可以调换commit之间的顺序….非常好用．</p>
<p>####stash<br>当你在一个分支上正写着代码，突然需要你切换到另一个分支上去改bug,你又不想现在提交，可以使用<code>git stash</code>指令，最后记得要把代码<code>pop</code>出来．</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/08/digitaloceanan-zhuang-laravel/" itemprop="url">
                  digitalocean安装laravel
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-08T17:30:14+08:00" content="2015-09-08">
              2015-09-08
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前段时间在digitalocean上安装laravel遇到了<code>out of memory</code>的坑，下面是一个完美的安装方法</p>
<blockquote>
<p>How To Install Laravel with Nginx on an Ubuntu 12.04 LTS VPS</p>
</blockquote>
<hr>
<p>Laravel is a framework for websites in the PHP programming language. It allows developers to rapidly develop a website by abstracting common tasks used in most web projects, such as authentication, sessions, and caching. Laravel 4, the newest version of Laravel is based on an older framework called Symfony, but with a more expressive syntax. It is installed using Composer, a Dependency Manager, allowing developers to integrate even more open source PHP projects in a web project. If you want to want to read a quick introduction to Laravel, read the introduction. If you want to learn more about Composer, visit the website.</p>
<p>Preparation</p>
<p>Let’s start off by updating the packages installed on your VPS. This makes sure no issues will arise on incompatible versions of the software. Also, make sure you run everything in this tutorial as root, and if you don’t, make sure you add sudo before every command!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">apt-get update &amp;&amp; apt-get upgrade</div><div class="line">Hit Enter when you&apos;re asked to confirm.</div></pre></td></tr></table></figure>
<p>Installation<br>Now we need to install the actual packages required to install Laravel. This will basically be Nginx and PHP. Because Composer is run from the command line, we do need php5-cli, and because we want to manage the connection between Nginx and PHP using the FastCGI Process Manager, we will need php5-fpm as well. Besides, Laravel requires php5-mcrypt and Composer requires git.</p>
<p><code>apt-get install nginx php5-fpm php5-cli php5-mcrypt git</code><br>This should take a while to install, but you are now ready to configure Nginx and PHP.</p>
<p>Configuring Nginx</p>
<p>We will configure Nginx like Laravel is the only website you will run on it, basically accepting every HTTP request, no matter what the Host header contains. If you want more than one website on your VPS, please refer to this tutorial.</p>
<p>Make a dedicated folder for your Laravel website:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir /var/www</div><div class="line">mkdir /var/www/laravel</div></pre></td></tr></table></figure></p>
<p>Open up the default virtual host file.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano /etc/nginx/sites-available/default</div></pre></td></tr></table></figure></p>
<p>The configuration should look like below:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen   80 default_server;</div><div class="line"></div><div class="line">    root /var/www/laravel/public/;</div><div class="line">    index index.php index.html index.htm;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">         try_files $uri $uri/ /index.php$is_args$args;</div><div class="line">    &#125;</div><div class="line"># pass the PHP scripts to FastCGI server listening on  /var/run/php5-fpm.sock</div><div class="line">    location ~ \.php$ &#123;</div><div class="line">            try_files $uri /index.php =404;</div><div class="line">            fastcgi_pass unix:/var/run/php5-fpm.sock;</div><div class="line">            fastcgi_index index.php;</div><div class="line">            fastcgi_param SCRIPT_FILENAME 							$document_root$fastcgi_script_name;</div><div class="line">            include fastcgi_params;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Now save and exit!</p>
<p>Configuring PHP</p>
<p>We need to make a small change in the PHP configuration. Open the php.ini file:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano /etc/php5/fpm/php.ini</div></pre></td></tr></table></figure></p>
<p>Find the line, <code>cgi.fix_pathinfo=1</code>, and change the 1 to 0.<br><code>cgi.fix_pathinfo=0</code><br>If this number is kept as 1, the PHP interpreter will do its best to process the file that is as near to the requested file as possible. This is a possible security risk. If this number is set to 0, conversely, the interpreter will only process the exact file path — a much safer alternative. Now save it and exit nano.</p>
<p>We need to make another small change in the php5-fpm configuration. Open up www.conf:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nano /etc/php5/fpm/pool.d/www.conf</div></pre></td></tr></table></figure></p>
<p>Find the line, <code>listen = 127.0.0.1:9000</code>, and change the <code>127.0.0.1:9000</code> to <code>/var/run/php5-fpm.sock</code>.</p>
<p><code>listen = /var/run/php5-fpm.sock</code></p>
<p>Again: save and exit!</p>
<p>(Re)Starting PHP and Nginx</p>
<p>Now make sure that both services are restarted.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service php5-fpm restart</div><div class="line">service nginx restart</div></pre></td></tr></table></figure></p>
<p>Installing Composer</p>
<p>It is now time to install Composer, this process is quite straightforward. Let’s start off by downloading Composer:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -sS https://getcomposer.org/installer | php</div></pre></td></tr></table></figure>
<p>Now install it globally:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv composer.phar /usr/local/bin/composer</div></pre></td></tr></table></figure></p>
<p>Installing Laravel</p>
<p>Heads Up: If you’re installing Laravel on DigitalOcean’s 512MB VPS, make sure you add a swapfile to Ubuntu to prevent it from running out of memory. You can quickly do this by issuing the following commands. This will only work during 1 session, so if you reboot during this tutorial, add the swapfile again.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dd if=/dev/zero of=/swapfile bs=1024 count=512k</div><div class="line">mkswap /swapfile</div><div class="line">swapon /swapfile</div></pre></td></tr></table></figure></p>
<p>Finally, let’s install Laravel.<br><strong><em>laravel5的安装方法参考<a href="http://www.golaravel.com/laravel/" target="_blank" rel="external">laravel中文社区</a></em></strong></p>
<p>Fixing permissions</p>
<p>This is really quite a easy fix:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chgrp -R www-data /var/www/laravel</div><div class="line">chmod -R 775 /var/www/laravel/app/storage</div></pre></td></tr></table></figure></p>
<p>Wrap Up<br>So that it, you can now enjoy Laravel running on a fast Nginx backend! If you want to use MySQL on your Laravel installation, it is extremely easy: just issue apt-get install mysql-server and MySQL will be installed right away. For more information on using Laravel visit the website. Happy developing!<br><a href="https://www.digitalocean.com/community/tutorials/how-to-install-laravel-with-nginx-on-an-ubuntu-12-04-lts-vps" target="_blank" rel="external">原文</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/07/14/androiddan-chu-quan-ping-dialog/" itemprop="url">
                  Android弹出全屏Dialog
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-14T09:11:12+08:00" content="2015-07-14">
              2015-07-14
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">public Dialog getDialog()&#123;</div><div class="line">AlertDialog dialog = builder.create();</div><div class="line">dialog.show();</div><div class="line">dialog.setContentView(layout);</div><div class="line">Window window = dialog.getWindow();</div><div class="line">WindowManager.LayoutParams lp = window.getAttributes();</div><div class="line">lp.width = WindowManager.LayoutParams.MATCH_PARENT;</div><div class="line">lp.height = WindowManager.LayoutParams.MATCH_PARENT;</div><div class="line">window.setAttributes(lp);</div><div class="line">return dialog;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/07/05/bukkitxu-lie-hua-cun-chu-zuo-biao/" itemprop="url">
                  Bukkit序列化存储坐标
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-05T10:55:36+08:00" content="2015-07-05">
              2015-07-05
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">import java.util.HashMap;</div><div class="line">import java.util.Map;</div><div class="line"> </div><div class="line">import org.bukkit.Bukkit;</div><div class="line">import org.bukkit.Location;</div><div class="line">import org.bukkit.configuration.serialization.ConfigurationSerializable;</div><div class="line"> </div><div class="line">public class Position implements ConfigurationSerializable&#123;</div><div class="line"> </div><div class="line">    private String world;</div><div class="line">    private double x, y, z;</div><div class="line"> </div><div class="line">    public Position(Location location)&#123;</div><div class="line">        this(location.getWorld().getName(), location.getX(), location.getY(), location.getZ());</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public Position(String world, double x, double y, double z)&#123;</div><div class="line">        setWorld(world);</div><div class="line">        setX(x);</div><div class="line">        setY(y);</div><div class="line">        setZ(z);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public String getWorld() &#123;</div><div class="line">        return world;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public void setWorld(String world) &#123;</div><div class="line">        this.world = world;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public double getX() &#123;</div><div class="line">        return x;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public void setX(double x) &#123;</div><div class="line">        this.x = x;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public double getY() &#123;</div><div class="line">        return y;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public void setY(double y) &#123;</div><div class="line">        this.y = y;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public double getZ() &#123;</div><div class="line">        return z;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public void setZ(double z) &#123;</div><div class="line">        this.z = z;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public Location getLocation()&#123;</div><div class="line">        return new Location(Bukkit.getWorld(getWorld()), getZ(), getY(), getZ());</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    @Override</div><div class="line">    public Map&lt;String, Object&gt; serialize() &#123;</div><div class="line">        Map&lt;String, Object&gt; result = new HashMap&lt;String, Object&gt;();</div><div class="line"> </div><div class="line">        result.put(&quot;world&quot;, getWorld());</div><div class="line">        result.put(&quot;x&quot;, getX());</div><div class="line">        result.put(&quot;y&quot;, getY());</div><div class="line">        result.put(&quot;z&quot;, getZ());</div><div class="line"> </div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    public static Position deserialize(Map&lt;String, Object&gt; args)&#123;</div><div class="line">        return new Position((String)args.get(&quot;world&quot;), (Double)args.get(&quot;x&quot;), (Double)args.get(&quot;y&quot;), (Double)args.get(&quot;z&quot;));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后不要忘了在主类中注册<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">static&#123;</div><div class="line">    ConfigurationSerialization.registerClass(Position.class);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/29/an-zhuang-laravelhou-fang-wen-zhu-ye-403huo-zhe-502/" itemprop="url">
                  安装laravel后，访问主页403或者502
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-29T14:57:02+08:00" content="2015-05-29">
              2015-05-29
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>安装了laravel后，一直出现403或者502的错误，郁闷了好几天，今天终于知道了原因。原来是php解析错误造成的，我少安装了一个php模块<code>php5-fpm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install php5-fpm</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/11/androidfang-jie-cao-jing-xuan-di-bu-cai-dan-lan/" itemprop="url">
                  Android仿“节操精选底部菜单栏”
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-11T21:46:48+08:00" content="2015-05-11">
              2015-05-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>分享一个android Demo，这是我做的一个放“节操精选的底部菜单栏”，运用了自定义View和Animation的知识点。是一个学习自定义view的不错的例子</p>
</blockquote>
<p>####一.关于用到的一些知识点和资源</p>
<ol>
<li><a href="http://developer.android.com/training/custom-views/create-view.html" target="_blank" rel="external">自定义View</a></li>
<li><a href="http://www.iconfont.cn/" target="_blank" rel="external">图标</a></li>
</ol>
<p>####二.代码地址<br><a href="https://camo.githubusercontent.com/cbd3211f1185a6acf59c4f1d53824a756e2c4f16/687474703a2f2f69312e74696574756b752e636f6d2f356364616234616437643937336232302e676966" target="_blank" rel="external">GitHub</a></p>
<hr>
<p>效果图<br><img src="https://camo.githubusercontent.com/cbd3211f1185a6acf59c4f1d53824a756e2c4f16/687474703a2f2f69312e74696574756b752e636f6d2f356364616234616437643937336232302e676966" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/25/minecraftfu-wu-qi-kua-fu-liao-tian-cha-jian/" itemprop="url">
                  Minecraft服务器跨服聊天插件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-04-25T00:16:55+08:00" content="2015-04-25">
              2015-04-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>最近实习，也很少更新博客了，今天就更新一下吧。</p>
</blockquote>
<p>前几天做了一款跨服聊天的Minecraft服务器免费插件<a href="http://www.mcbbs.net/thread-433831-1-1.html" target="_blank" rel="external">插件链接</a>，<a href="https://github.com/shellljx/MultiServerChat" target="_blank" rel="external">Github链接</a>，这个插件是基于<code>Java Socket</code>实现的一个多客户端聊天室，子服务器的玩家发送的聊天信息通过主服务器进行转发实现跨服聊天。</p>
<p>一些腐竹觉得最初版本有点不符合他们的实际情况，找我来定制，效果不错</p>
<p><img src="http://i4.tietuku.com/167497642eb57754.png" alt="有图有真相"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/04/nginxbu-neng-jie-xi-phpde-jie-jue-fang-fa/" itemprop="url">
                  Nginx不能解析php的解决方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-04-04T22:43:24+08:00" content="2015-04-04">
              2015-04-04
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>今天想在自己的服务器上安装一个开源的php论坛平台，论坛平台上传到服务器上，绑定好三级域名之后发现服务器无法解析php文件但是可以解析html，经过google发现原来nginx默认不能解析php，要进行设置才可以。</p>
</blockquote>
<hr>
<p>下面是我在设置nginx解析php的过程和遇到的一些问题。</p>
<ol>
<li><p>先安装php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install php5-cli php5-cgi mysql-server php5-mysql</div></pre></td></tr></table></figure>
</li>
<li><p>安装FastCgi</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install spawn-fcgi</div></pre></td></tr></table></figure>
</li>
</ol>
<p>3.配置nginx修改index的一行修改为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">index index.php index.html index.htm;</div></pre></td></tr></table></figure></p>
<p>4.配置nginx去掉下面部分的注释用于支持 php 脚本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">location ~ \.php$ &#123;</div><div class="line">include /etc/nginx/fastcgi_params; #需放在第一行，否则会出错</div><div class="line">fastcgi_pass 127.0.0.1:9000;</div><div class="line">fastcgi_index index.php;</div><div class="line">fastcgi_param SCRIPT_FILENAME /var/www/nginx-default$fastcgi_script_name;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5.重启nginx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service nginx restart</div></pre></td></tr></table></figure></p>
<p>6.启动fastcgi php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">spawn-fcgi -a 127.0.0.1 -p 9000 -C 10 -u www-data -f /usr/bin/php-cgi</div></pre></td></tr></table></figure></p>
<p><strong>为了让php-cgi开机自启动： Ubuntu开机之后会执行/etc/rc.local文件中的脚本 所以我们可以直接在/etc/rc.local中添加启动脚本。 spawn-fcgi -a 127.0.0.1 -p 9000 -C 10 -u www-data -f /usr/bin/php-cgi 添加到语句：exit 0 前面才行</strong></p>
<p>7.创建、测试phpinfo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vi /var/www/nginx-default/info.php</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;?php phpinfo(); ?&gt;</div></pre></td></tr></table></figure>
<p>经过上面的几步后应该就可以解析php了，但是有的时候还是会出现错误。</p>
<p><strong>502 Bad Gateway</strong></p>
<p>首先要使用指令<code>ps aux | grep php</code>来检查一下<strong>php-fpm</strong>是否在运行<br>，如果在输出的进程中没有<strong>php-fpm</strong>的字样，你要重新安装php-fpm.如果<br>有看到php-fpm的字样，那就可以忽略这一步了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get remove php5 php5-cgi php5-fpm</div><div class="line">sudo apt-get install php5 php5-cgi php5-fpm</div></pre></td></tr></table></figure></p>
<p>然后打开配置文件<code>/etc/php5/fpm/pool.d/www.conf</code>找到<code>listen</code>修改成和<code>/etc/nginx/sites-available/default</code>中的<code>fastcgi_pass</code>一样就可以了，<br>我是修改成下面这个样子的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">listen = 127.0.0.1:9000</div></pre></td></tr></table></figure></p>
<p><strong>File not found</strong></p>
<p>如果经过上面的操作又出现了<code>File not found</code>这个错误的话，一般都是服务器配置错误了。我的<code>nginx/sites-available/default</code>配置文件是配置成这样的，我服务器根目录在<code>/var/www/bbs</code>文件夹下.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">        listen 80;</div><div class="line"></div><div class="line">        root /var/www/bbs;</div><div class="line">        index index.html index.htm index.php;</div><div class="line"></div><div class="line">        # Make site accessible from http://localhost/</div><div class="line">        server_name bbs.linghun.me;</div><div class="line"></div><div class="line">        location ~ \.php$ &#123;</div><div class="line">        include /etc/nginx/fastcgi_params; #需放在第一行，否则会出错</div><div class="line">        fastcgi_pass 127.0.0.1:9000;</div><div class="line">        fastcgi_index index.php;</div><div class="line">        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>至此就可以解析php了</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars0.githubusercontent.com/u/7572018?v=3&s=466"
               alt="shell" />
          <p class="site-author-name" itemprop="name">shell</p>
          <p class="site-description motion-element" itemprop="description">量变产生质变</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">25</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/shellljx" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/shellljx" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/shellljx" target="_blank" title="QQ">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  QQ
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/shellljx" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shell</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

</body>
</html>
